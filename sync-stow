#!/bin/bash
set -euo pipefail

packages=(
  bin
  btop
  ghostty
  git
  lazygit
  starship
  taskwarrior
  tmux
  zsh
)

for package in "${packages[@]}"; do
  stow -R -v -t ~ -d ~/dotfiles "$package"
done

# Special case for nvim (submodule) - direct symlink
if [ -d ~/.config/nvim ] && [ ! -L ~/.config/nvim ]; then
  echo "ERROR: ~/.config/nvim exists as a directory, not a symlink."
  echo "Remove it manually before running this script:"
  echo "  rm -rf ~/.config/nvim"
  exit 1
fi
ln -sfn ~/dotfiles/nvim ~/.config/nvim
echo "LINK: nvim -> ~/dotfiles/nvim"
